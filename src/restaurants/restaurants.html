<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>EcoScape</title>
    <link rel="stylesheet" href="./" />
    <script src="./restaurant.js" defer></script>
    <link rel="icon" href="../image/icon2.png">
    <!-- <link rel="stylesheet" href="./menu.css"> -->
    <link rel="stylesheet"  href="restaurant.css">
    <link href="restaurant.css" rel="stylesheet">

    <!-- Import Vue -->
    <script src="https://unpkg.com/vue@next"></script>
    <!-- Import AJAX -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>


  </head>
  <body>
    <!--Header-->
        
        <img src="../image/icon.png" width="50cm">
        <h1>Discover <span id="typewriter"></span><span id="cursor">|</span></h1>
    <!---->
    
    <div id = "app">
    <!--Tabs (choosing which region)-->
    <div id="tab-container" class="tab-container">
      <div class="container-fluid">
        <div class="text-center col-md-10 col-md-offset-1">
          <p id="tabs"></p>

          <!-- Content for All -->
          <div id="content1" class="tab-content" v-for="gallery in dividedAllDestinations" >
            <div class="gallery">
              <dest class="card" v-for="destination in gallery" :name="destination.name" :image="destination.image" :url="destination.url" @click="navigateToUrl(destination.url)"></dest>
            </div>
          </div>
      
          <!-- Content for Central -->
          <div id="content2" class="tab-content" v-for="gallery in dividedCentralDestinations">
            <div class="gallery">
              <dest class="card" v-for="destination in gallery" :name="destination.name" :image="destination.image" :url="destination.url" @click="navigateToUrl(destination.url)"></dest>
            </div>
          </div>

          <!-- Content for East -->
          <div id="content3" class="tab-content" v-for="gallery in dividedEastDestinations">
            <div class="gallery">
              <dest class="card" v-for="destination in gallery" :name="destination.name" :image="destination.image" :url="destination.url" @click="navigateToUrl(destination.url)"></dest>
            </div>
          </div>

          <!-- Content for the south -->
          <div id="content4" class="tab-content" v-for="gallery in dividedSouthDestinations">
            <div class="gallery">
              <dest class="card" v-for="destination in gallery" :name="destination.name" :image="destination.image" :url="destination.url" @click="navigateToUrl(destination.url)"></dest>
            </div>
          </div>

          <!-- Content for the north -->
          <div id="content5" class="tab-content" v-for="gallery in dividedNorthDestinations">
            <div class="gallery">
              <dest class="card" v-for="destination in gallery" :name="destination.name" :image="destination.image" :url="destination.url" @click="navigateToUrl(destination.url)"></dest>
            </div>
          </div>

          <!-- Content for the west (jurong lake gardens) -->
          <div id="content6" class="tab-content" v-for="gallery in dividedWestDestinations">
            <div class="gallery">
              <dest class="card" v-for="destination in gallery" :name="destination.name" :image="destination.image" :url="destination.url" @click="navigateToUrl(destination.url)"></dest>
          </div>
        </div>
        </div>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <div class="footer-wrapper">
          <div class="footer-columns">
              <div class="footer-links">
                  <div class="footer-logo">
                      <img src="../image/icon2.png">
                  </div>
                  <section>
                    <ul>
                      <h3>Directory</h3>
                      <li>
                        <a href="../att/attraction1.html" title="attractions">Attractions</a>
                      </li>
                      <li>
                        <a href="../hotel/hotel.html" title="hotel">Hotel</a>
                      </li>
                      <li>
                        <a href="#" title="restaurant">Restaurant</a>
                      </li>
                      <li>
                        <a href="#" title="GTP">Green Transport Planner</a>
                      </li>
                    </ul>
                  </section>
                  <section>
                    <ul>
                      <h3>Ecoscape</h3>
                      <li>
                        <a href="#" title="aboutus">About Us</a>
                      </li>
                    </ul>
                  </section>
              </div>
             
          </div>
          <div class="footer-bottom">
            <small>Ecoscape Ltd.
              <span id="year"></span>, All rights reserved
            </small>
          </div>
      </div>
  </footer>
  </div>
  <script>
      document.getElementById("year").innerHTML = new Date().getFullYear()

      var url = "restaurant.json" 

      const app = Vue.createApp( {
            data() {
                return {
                    destinations: [{name:"", image:"", url: "", area: []}],
                    init: true,
                    central_dest: [],
                    north_dest: [],
                    south_dest: [],
                    east_dest: [],
                    west_dest: []
                }
            },
            methods: {
              navigateToUrl(url) {
                // Handle the navigation to the specified URL
                window.location.href = url;
              }
            },
            computed: {
              dividedAllDestinations() {
                // Divide the destinations array into groups of 6
                const result = [];
                const groupSize = 6;
                for (let i = 0; i < this.destinations.length; i += groupSize) {
                  result.push(this.destinations.slice(i, i + groupSize));
                }
                // console.log(result)
                return result;
              },
              dividedCentralDestinations() {
                // Divide the destinations array into groups of 6
                const resultC = [];
                const groupSize = 6;
                for (let i = 0; i < this.central_dest.length; i += groupSize) {
                  resultC.push(this.central_dest.slice(i, i + groupSize));
                }
                return resultC;
              },
              dividedNorthDestinations() {
                // Divide the destinations array into groups of 6
                const resultN = [];
                const groupSize = 6;
                for (let i = 0; i < this.north_dest.length; i += groupSize) {
                  resultN.push(this.north_dest.slice(i, i + groupSize));
                }
                return resultN;
              },
              dividedSouthDestinations() {
                // Divide the destinations array into groups of 6
                const resultS = [];
                const groupSize = 6;
                for (let i = 0; i < this.south_dest.length; i += groupSize) {
                  resultS.push(this.south_dest.slice(i, i + groupSize));
                }
                return resultS;
              },
              dividedEastDestinations() {
                // Divide the destinations array into groups of 6
                const resultE = [];
                const groupSize = 6;
                for (let i = 0; i < this.east_dest.length; i += groupSize) {
                  resultE.push(this.east_dest.slice(i, i + groupSize));
                }
                return resultE;
              },
              dividedWestDestinations() {
                // Divide the destinations array into groups of 6
                const resultW = [];
                const groupSize = 6;
                for (let i = 0; i < this.west_dest.length; i += groupSize) {
                  resultW.push(this.west_dest.slice(i, i + groupSize));
                }
                return resultW;
              }
            },
            created() { // lifecycle book -- created is an event tat occurs when the Vue instance has been created
                axios.get(url)
                        .then(response => {
                            result = response.data
                            // console.log(result)
                            
                            for (let i = 0; i<result.length; i++) {
                              // console.log(result[i])
                              destination = {}
                              
                              destination.name = result[i].name
                              destination.image = "../justin/" + result[i].image
                              destination.url = result[i].url
                              destination.area = result[i].area
                              if (this.init) {
                                this.destinations = [destination]
                                this.init = false
                            } else 
                                this.destinations.push(destination)
                            }
                            console.log(this.destinations)

                            // Populating different areas
                            for (destination of this.destinations) {
                              // console.log(destination)
                              // console.log(destination.area[1])
                              if (destination.area[1] == "central") {
                                this.central_dest.push(destination)
                              }
                              else if (destination.area[1] == "north") {
                                this.north_dest.push(destination)
                              }
                              else if (destination.area[1] == "south") {
                                this.south_dest.push(destination)
                              }
                              else if (destination.area[1] == "east") {
                                this.east_dest.push(destination)
                              }
                              else if (destination.area[1] == "west") {
                                this.west_dest.push(destination)
                              }
                            }
                        })
            }
        })

        app.component("dest", {
          template: `
            <article class="card">
            <figure>
                      <img :src="image">
                      <figcaption><h3>{{ name }}</h3></figcaption>
            </figure>
            </article>
          `,
          props: ['name', 'image', 'url']
        })

    const vm = app.mount('#app')
    </script>
      

  </body>
</html>